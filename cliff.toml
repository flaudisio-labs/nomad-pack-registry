# git-cliff ~ configuration file
# https://git-cliff.org/docs/configuration

[changelog]
# Ref: https://keats.github.io/tera/docs/#introduction
body = """
  # Changelog

  {% if version -%}
  ## {{ version | trim_start_matches(pat="v") }} - {{ timestamp | date(format="%Y-%m-%d") }}
  {% else -%}
  ## Unreleased
  {% endif -%}

  {% for group, commits in commits | group_by(attribute="group") %}
  ### {{ group | striptags | trim | upper_first }}

  {% for commit in commits -%}
  - {% if commit.scope %}**{{ commit.scope }}**: {% endif %}\
    {% if commit.breaking %}[**breaking**] {% endif %}\
    {{ commit.message | upper_first }}
  {% endfor -%}
  {% endfor %}
"""
trim = true
render_always = true
output = "CHANGELOG.md"

[git]
# Ref: https://www.conventionalcommits.org
conventional_commits = true
filter_unconventional = true
require_conventional = true
sort_commits = "newest"
split_commits = false
commit_parsers = [
  # Note: the HTML comments define the group positions
  { message = "^feat", group = "<!-- 0 --> Features" },
  { message = "^fix", group = "<!-- 1 --> Bug fixes" },
  { message = "^refactor", group = "<!-- 2 --> Refactor" },
  { message = "^doc", group = "<!-- 3 --> Documentation" },
  { message = "^perf", group = "<!-- 4 --> Performance" },
  { message = "^style", group = "<!-- 5 --> Styling" },
  { message = "^test", group = "<!-- 6 --> Testing" },
  { message = "^chore: bump version", skip = true },
  { message = "^chore|^ci", group = "<!-- 7 --> Miscellaneous tasks" },
  { message = "^revert", group = "<!-- 8 --> Reverts" },
  { message = ".*", group = "<!-- 9 --> Other" },
]
filter_commits = false
protect_breaking_commits = false
topo_order = false
topo_order_commits = true
use_branch_tags = false
